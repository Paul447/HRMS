{% extends "dashboard.html" %}

{% block content %}
    <h2>Users Currently On Shift</h2>
    <ul>
        {% for user in users_on_shift %}
            <li>{{ user.username }} - {{ user.clock_in_time_local }}</li>
        {% empty %}
            <li>No users are currently on shift.</li>
        {% endfor %}
    </ul>
{% load static %}
<script>
    document.addEventListener("DOMContentLoaded", function() {
        // This script can be used to refresh the list periodically if needed
        fetch('/api/clock/on-shift/')
            .then(response => response.text())
            .then(html => {
                document.querySelector('ul').innerHTML = html;
            })
            .catch(error => console.error('Error fetching on-shift users:', error));
    });
</script>
{% endblock %}